{"ast":null,"code":"import _slicedToArray from\"/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/productManager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate}from'react-router-dom';import ProductForm from'../components/ProductForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdatePage=function UpdatePage(){var nav=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),oneProduct=_useState2[0],setOneProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];useEffect(function(){axios.get(\"http://localhost:8000/api/products/\".concat(id)).then(function(res){var product=res.data.product;// console.log(res);\n// for (var i=0; i < 1000000000; i++){\n//     let x = i*i;\n// }\nsetOneProduct(product);}).catch(function(err){return console.log(err);});},[]);var updateProduct=function updateProduct(productToUpdate){axios.put(\"http://localhost:8000/api/products/\".concat(id),productToUpdate).then(function(results){console.log(results);nav(\"/products/\".concat(id));}).catch(function(err){// console.log(err)\nvar errorResponse=err.response.data.error.errors;var errorArr=[];for(var key in errorResponse){errorArr.push(errorResponse[key].message);setFormErrors(errorArr);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update\"}),/*#__PURE__*/_jsx(ProductForm,{useForm:updateProduct,product:oneProduct}),formErrors&&formErrors.map(function(val,i){return/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:val});})]});};export default UpdatePage;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","ProductForm","jsx","_jsx","jsxs","_jsxs","UpdatePage","nav","_useParams","id","_useState","_useState2","_slicedToArray","oneProduct","setOneProduct","_useState3","_useState4","formErrors","setFormErrors","get","concat","then","res","product","data","catch","err","console","log","updateProduct","productToUpdate","put","results","errorResponse","response","error","errors","errorArr","key","push","message","children","useForm","map","val","i","className"],"sources":["/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/productManager/client/src/views/UpdatePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom'\n\nimport ProductForm from '../components/ProductForm';\n\nconst UpdatePage = () => {\n    const nav = useNavigate();\n    const { id } = useParams();\n    const [oneProduct, setOneProduct] = useState({});\n    \n    const [formErrors, setFormErrors] = useState([]);\n\n    useEffect(() => {\n        axios\n            .get(`http://localhost:8000/api/products/${id}`)\n            .then((res) => {\n                const product = res.data.product\n                // console.log(res);\n                // for (var i=0; i < 1000000000; i++){\n                //     let x = i*i;\n                // }\n                setOneProduct(product);\n            })\n            .catch((err) => console.log(err))\n    }, [])\n\n    const updateProduct = (productToUpdate) => {\n        axios\n            .put(`http://localhost:8000/api/products/${id}`, productToUpdate)\n            .then((results) => {\n                console.log(results)\n                nav(`/products/${id}`);\n            })\n            .catch((err) => {\n                // console.log(err)\n                const errorResponse = err.response.data.error.errors\n                const errorArr = []\n                for(const key in errorResponse){\n                    errorArr.push(errorResponse[key].message)\n                    setFormErrors(errorArr);\n                }\n            })\n    };\n\n\n    return (\n        <div>\n            <h2>Update</h2>\n            {/* { oneProduct.title !== undefined && */}\n            <ProductForm useForm={updateProduct} product={oneProduct} />\n            {formErrors && formErrors.map((val, i) => \n                <p className='text-danger'>{val}</p>)}\n            {/* } */}\n        </div>\n    )\n}\n\nexport default UpdatePage;"],"mappings":"2KAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CAEzD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpD,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACrB,GAAM,CAAAC,GAAG,CAAGP,WAAW,EAAE,CACzB,IAAAQ,UAAA,CAAeT,SAAS,EAAE,CAAlBU,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,IAAAC,SAAA,CAAoCd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhC,IAAAI,UAAA,CAAoCnB,QAAQ,CAAC,EAAE,CAAC,CAAAoB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAEhCnB,SAAS,CAAC,UAAM,CACZC,KAAK,CACAqB,GAAG,uCAAAC,MAAA,CAAuCX,EAAE,EAAG,CAC/CY,IAAI,CAAC,SAACC,GAAG,CAAK,CACX,GAAM,CAAAC,OAAO,CAAGD,GAAG,CAACE,IAAI,CAACD,OAAO,CAChC;AACA;AACA;AACA;AACAT,aAAa,CAACS,OAAO,CAAC,CAC1B,CAAC,CAAC,CACDE,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAG,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,eAAe,CAAK,CACvChC,KAAK,CACAiC,GAAG,uCAAAX,MAAA,CAAuCX,EAAE,EAAIqB,eAAe,CAAC,CAChET,IAAI,CAAC,SAACW,OAAO,CAAK,CACfL,OAAO,CAACC,GAAG,CAACI,OAAO,CAAC,CACpBzB,GAAG,cAAAa,MAAA,CAAcX,EAAE,EAAG,CAC1B,CAAC,CAAC,CACDgB,KAAK,CAAC,SAACC,GAAG,CAAK,CACZ;AACA,GAAM,CAAAO,aAAa,CAAGP,GAAG,CAACQ,QAAQ,CAACV,IAAI,CAACW,KAAK,CAACC,MAAM,CACpD,GAAM,CAAAC,QAAQ,CAAG,EAAE,CACnB,IAAI,GAAM,CAAAC,GAAG,GAAI,CAAAL,aAAa,CAAC,CAC3BI,QAAQ,CAACE,IAAI,CAACN,aAAa,CAACK,GAAG,CAAC,CAACE,OAAO,CAAC,CACzCtB,aAAa,CAACmB,QAAQ,CAAC,CAC3B,CACJ,CAAC,CAAC,CACV,CAAC,CAGD,mBACIhC,KAAA,QAAAoC,QAAA,eACItC,IAAA,OAAAsC,QAAA,CAAI,QAAM,EAAK,cAEftC,IAAA,CAACF,WAAW,EAACyC,OAAO,CAAEb,aAAc,CAACN,OAAO,CAAEV,UAAW,EAAG,CAC3DI,UAAU,EAAIA,UAAU,CAAC0B,GAAG,CAAC,SAACC,GAAG,CAAEC,CAAC,qBACjC1C,IAAA,MAAG2C,SAAS,CAAC,aAAa,CAAAL,QAAA,CAAEG,GAAG,EAAK,GAAC,GAEvC,CAEd,CAAC,CAED,cAAe,CAAAtC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}