{"ast":null,"code":"import _toConsumableArray from\"/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/productManager/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/productManager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import ProductForm from'../components/ProductForm';import DeleteButton from'../components/DeleteButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateAndDashboard=function CreateAndDashboard(){var nav=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),formErrors=_useState2[0],setFormErrors=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productList=_useState4[0],setProductList=_useState4[1];var removeFromDom=function removeFromDom(productToDelete){setProductList(productList.filter(function(product){return product._id!==productToDelete;}));};var createProduct=function createProduct(newProduct){axios.post('http://localhost:8000/api/products',newProduct).then(function(results){console.log(results);setProductList([].concat(_toConsumableArray(productList),[results.data.product]));nav('/products');}).catch(function(err){// console.log(err)\nvar errorResponse=err.response.data.error.errors;var errorArr=[];for(var key in errorResponse){// console.log(errorResponse[key].message)\nerrorArr.push(errorResponse[key].message);setFormErrors(errorArr);}});};useEffect(function(){axios.get('http://localhost:8000/api/products').then(function(res){setProductList(res.data.products);console.log(res);}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Product Manager\"}),/*#__PURE__*/_jsx(ProductForm,{useForm:createProduct,product:{title:'',price:0,description:''}}),formErrors&&formErrors.map(function(val,i){return/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:val});})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"All Products:\"}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[productList.map(function(product,indx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Name: \",/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product._id),children:/*#__PURE__*/_jsx(\"span\",{children:product.title})})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product._id,\"/edit\"),children:\"Edit\"}),\" |\",/*#__PURE__*/_jsx(DeleteButton,{productId:product._id,successCallback:function successCallback(){return removeFromDom(product._id);}})]})]},indx);}),\";\"]})})]});};export default CreateAndDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","ProductForm","DeleteButton","jsx","_jsx","jsxs","_jsxs","CreateAndDashboard","nav","_useState","_useState2","_slicedToArray","formErrors","setFormErrors","_useState3","_useState4","productList","setProductList","removeFromDom","productToDelete","filter","product","_id","createProduct","newProduct","post","then","results","console","log","concat","_toConsumableArray","data","catch","err","errorResponse","response","error","errors","errorArr","key","push","message","get","res","products","children","className","useForm","title","price","description","map","val","i","indx","to","productId","successCallback"],"sources":["/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/productManager/client/src/views/CreateAndDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom'\n\nimport ProductForm from '../components/ProductForm';\nimport DeleteButton from '../components/DeleteButton';\n\n\nconst CreateAndDashboard = () => {\n    const nav = useNavigate();\n\n    const [formErrors, setFormErrors] = useState([]);\n\n    const [productList, setProductList] = useState([])\n\n    const removeFromDom = (productToDelete) => {\n        setProductList(productList.filter((product) => product._id !== productToDelete))\n    }\n\n    const createProduct = (newProduct) => {\n        axios\n            .post('http://localhost:8000/api/products', newProduct)\n            .then((results) => {\n                console.log(results);\n                setProductList([...productList,results.data.product])\n                nav('/products');\n            })\n            .catch((err) => {\n                // console.log(err)\n                const errorResponse = err.response.data.error.errors\n                const errorArr = []\n                for(const key in errorResponse){\n                    // console.log(errorResponse[key].message)\n                    errorArr.push(errorResponse[key].message)\n                    setFormErrors(errorArr);\n                }\n            })\n    };\n\n    useEffect(() => {\n        axios.get('http://localhost:8000/api/products')\n            .then((res) => {\n                setProductList(res.data.products)\n                console.log(res)\n            })\n            .catch((err) => console.log(err));\n    }, [])\n\n    return (\n        <div>\n            <div className=''>\n                <h2>Product Manager</h2>\n                <ProductForm useForm={createProduct} product ={{ title: '', price: 0, description: '' }}/>\n                {formErrors && formErrors.map((val, i) => \n                <p className='text-danger'>{val}</p>)}\n            </div>\n            <h1>All Products:</h1>\n            <table className='table'>\n                <tbody>\n                    {productList.map((product, indx) => (\n                        <tr key={indx}>\n                            <td>Name: <Link to={`/products/${product._id}`}><span>{product.title}</span></Link></td>\n                            <td>\n                            <Link to={`/products/${product._id}/edit`}>Edit</Link> |\n                            <DeleteButton productId = {product._id} successCallback = {() => removeFromDom(product._id)}/>\n                            </td>\n                        </tr>\n                    ))};\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\nexport default CreateAndDashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}